---
title: "Day6"
date: 2021-04-04T15:16:47+08:00
lastmod: 2021-04-04
author: "xiaonan"
math:
 enable: true

tags: [java]
categories: [王道]
---

### 如何在一个构造函数中调用另一个构造函数?

用 **this**

```java
public Student(String name, int age, String gender, int stuId) {

	this(name, age, gender);
	this.stuId = stuId;
}
```

![20210403200854](https://img.fengqigang.cn//img/20210403200854.png)

### 在一个 **java** 文件下， 所有的 **class** 是什么关系?

**同一个包** 的关系

不可以重名

![20210403201443](https://img.fengqigang.cn//img/20210403201443.png)

### 什么是匿名对象? 如何创建匿名对象?

**匿名对象**:

没有名字的对象，没有引用指向它的对象

**创建匿名对象**:

new 类名();

### 什么时候用匿名对象?

1. 用 **匿名对象调用方法**

**好处**

方便简洁， 如果只想调用一次该对象的成员方法

没有引用的对象是垃圾，会等待垃圾回收，理想情况下，可以提升内存利用率

**坏处**

如果想用对象多次访问成员，调用方法，那么匿名肯定不适用，创建多个匿名对象， 浪费空间，效率底

2. 如果方法的形式参数中需要一个对象，可以 **传入一个匿名对象**

3. 如果一个方法返回值类型是一个类，要返回一个对象，可以 **返回一个匿名对象**


### 什么是代码块? 可以分为多少种?

在java中, 使用大括号 **{}** 括起来的代码被称为 **代码块**

1. 局部代码块

2. 构造代码块(成员位置)

3. 静态代码块(构造代码块 + static 修饰)

4. 同步代码块(多线程)

### 什么是局部代码块? 有什么作用?

和局部变量位置相似， 处在 **方法中局部位置** 的代码块

**作用**:

限定局部变量的作用范围和生命周期，及早释放，提高内存利用率

代码太难看了，可读性很差

**并没有多大用，不要在代码中使用局部代码块**

![20210403202824](https://img.fengqigang.cn//img/20210403202824.png)

### 什么是构造代码块? 有什么用?

处于成员位置

{}

**作用**:

构造代码块会随着构造器的执行而执行，可以用来给成员变量赋值

### 给成员变量赋值的方式有哪些O

**创建对象中**:

1. 默认初始化 默认值

2. 显式赋值

3. 构造代码块

4. 构造器

### 若要 **new** 一个对象，其构造代码块的执行顺序是什么样的?

1. **对象创建出来后**，就把所有成员变量的值 **默认初始化**, 然后 **开始其余赋值操作**

2. 如果构造器在第一行显式的 **调用了另一个构造器** ，那么程序先 **跳转到this构造器** ，但并不会执行

3. 按照类中定义代码块和成员变量的位置， **从上到下执行** 代码块和成员变量自身的初始化语句

4. 继而执行该 **this** 构造器代码

5. 最后执行该构造器代码

### 在定义代码块中可以使用 **this** 关键字吗？

可以

定义代码块是在其定义对象之后执行的，

此时，已经有对象了，所以可以执行

![20210403211248](https://img.fengqigang.cn//img/20210403211248.png)

### 构造代码块有什么用? 如何用?

**用途**:

1. 构造代码块被创建该类每个对象都会调用

2. 可以抽取所有构造器都需要做的事情，放入构造代码块中

**注意**:

永远将 **构造代码块** ，放在成员变量的定义语句下面

- 如果代码块初始化在上，成员变量声明在下,**逻辑上会很奇怪**

- 如果对象的创建依赖于代码块和成员变量的定义位置，**很容易引发错误**

### ![20210404140206](https://img.fengqigang.cn//img/20210404140206.png) 这里可以吗?

可以

static int staticA = 10;

是在类加载的时候执行的

在使用定义代码块的时候，已经有对象了, 早已经出现了 static int staticA = 10; 了

所以可以对执行

![20210404140444](https://img.fengqigang.cn//img/20210404140444.png)



### 什么是静态代码块?

**位置**:

成员位置

**语法**:

static{}

**作用**:

在类加载时执行，给静态成员变量赋值, **只执行一次**

### 给静态成员变量赋值时主哪些方式?

**类加载时赋值**:

1. 默认初始化， 最先进行, 默认值

2. 显式赋值

3. 静态代码块赋值

4. 类名点的方式去赋值

**创建对象时赋值**

1. 构造代码块

2. 构造器

![20210404140936](https://img.fengqigang.cn//img/20210404140936.png)

### 静态代码块可不可以给普通成员变量赋值?

不可以

类加载时没有对象

### 静态代码块可不可以有 **this** 关键字?

没有， 类加载时没有对象

### 静态代码块执行几次?

静态代码块全局(一次程序的运行期间) **只执行一次**， 不会重复执行

### 在 **new** 对象过程中，静态代码块, 构造代码块，构造方法的执行顺序是什么样的?

1. 静态代码块

2. 构造代码块

3. 构造方法

### 静态代码块与静态成员有什么 **区别** 和 **联系** ?

1. 静态代码块和静态成员一样，**不能在里面调用非静态**

2. 静态代码块和静态成员变量的 **定义顺序** 会影响到静态成员变量的 **最终取值**

永远将 **静态代码块** 放在 **静态成员变量** 的定义 **下面**


### 静态代码块与构造代码块哪一个先赋值?

**静态代码块** 总是优于 **构造代码块**

### 构造代码块, 静态代码块可以给静态成员变量和普通变量赋值吗?

**构造代码块可以给静态成员变量赋值，静态代码块不能给普通成员代码块赋值**

### 构造代码块有哪些使用场景?

不想让对象共享一个属性(static), 但是还需要对象的某位上属性具有相同初始值

![20210404142535](https://img.fengqigang.cn//img/20210404142535.png)

### 静态代码块有哪些使用场景?

- 复杂的静态变量初始化

- JBDC的驱动加载

### 什么静态代码块可以用来测试一个类有没有被加载? 如何使用?

**静态代码块在类加载的时候就会执行**

![20210404143052](https://img.fengqigang.cn//img/20210404143052.png)

### ![20210404151009](https://img.fengqigang.cn//img/20210404151009.png) A类被加载了吗? 为什么?

没有

![20210404151041](https://img.fengqigang.cn//img/20210404151041.png)








